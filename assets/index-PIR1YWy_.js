(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function r(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=r(e);fetch(e.href,t)}})();function m(){cv.onRuntimeInitialized=function(){document.getElementById("preloader").style.display="none",document.getElementById("app").style.opacity="1",document.getElementById("imageUpload").addEventListener("change",p)}}function p(c){const n=c.target.files[0];if(!n){console.error("No file selected!");return}const r=new FileReader;r.onload=function(o){const e=new Image;e.onload=function(){v(e)},e.src=o.target.result},r.readAsDataURL(n)}function v(c){const n=document.getElementById("canvasOutput"),r=n.getContext("2d");n.width=c.width,n.height=c.height,r.drawImage(c,0,0);const o=cv.imread(n),e=new cv.Mat,t=new cv.Mat,i=new cv.Mat,u=new cv.MatVector,h=new cv.Mat;try{cv.cvtColor(o,e,cv.COLOR_RGBA2GRAY,0),cv.GaussianBlur(e,t,new cv.Size(5,5),0),cv.adaptiveThreshold(t,i,255,cv.ADAPTIVE_THRESH_GAUSSIAN_C,cv.THRESH_BINARY_INV,11,2),cv.findContours(i,u,h,cv.RETR_EXTERNAL,cv.CHAIN_APPROX_SIMPLE);const a=new cv.MatVector;for(let s=0;s<u.size();s++){const l=u.get(s),g=cv.contourArea(l),d=cv.boundingRect(l);g>500&&d.height>30&&d.width>30&&d.width<c.width*.9&&d.height<c.height*.9&&a.push_back(l)}const f=[];for(let s=0;s<a.size();s++){const l=a.get(s),g=new cv.Scalar(255,0,0,255);cv.drawContours(o,a,s,g,2,cv.LINE_8,h,0);const d=cv.boundingRect(l);f.push({x:d.x,y:d.y,width:d.width,height:d.height})}cv.imshow("canvasOutput",o),y(f,10),w(f,10),document.getElementById("previewBtnContainer").classList.remove("hidden")}catch(a){console.error("Error processing image:",a)}finally{o.delete(),e.delete(),t.delete(),i.delete(),u.delete(),filteredContours.delete(),h.delete()}}function y(c,n){const r=document.getElementById("boundingBoxContainer");r.innerHTML="",c.forEach(o=>{const e=document.createElement("div");e.className="absolute skeleton",e.style.width=`${o.width}px`,e.style.height=`${o.height}px`,e.style.borderRadius=`${n}px`,e.style.left=`${o.x}px`,e.style.top=`${o.y}px`,r.appendChild(e)})}function w(c,n){const r=document.querySelector(".mockup-code");r.innerHTML="",c.forEach(o=>{const e="rounded",t=document.createElement("pre"),i=document.createElement("code");i.textContent=`<Skeleton variant="${e}" width={${o.width}} height={${o.height}} />`,t.appendChild(i),t.setAttribute("class","flex"),r.appendChild(t)})}window.onload=function(){m()};document.getElementById("previewBtn").addEventListener("click",function(){const c=document.getElementById("codeBoxContainer"),n=document.getElementById("boundingBoxContainer");c.classList.contains("hidden")?(c.classList.remove("hidden"),n.classList.add("hidden")):(c.classList.add("hidden"),n.classList.remove("hidden"))});
